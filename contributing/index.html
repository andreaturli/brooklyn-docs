<!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
  -->

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Contributing to the Docs - Apache Brooklyn</title>

<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" />
<link href="/brooklyn-docs/style/deps/octicons/octicons.css" rel="stylesheet" />
<link href="/brooklyn-docs/style/deps/bootstrap-theme.css" rel="stylesheet" />
<link href="/brooklyn-docs/style/deps/font-awesome-4.2.0/css/font-awesome.min.css" rel="stylesheet" />
<link href="/brooklyn-docs/style/deps/tooltip.css" rel="stylesheet" />
<link href="/brooklyn-docs/style/css/code.css" rel="stylesheet" />
<link href="/brooklyn-docs/style/css/website.css" rel="stylesheet" />

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>

<body class="page">
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div class="navbar-brand">
                <a class="brand-apache" href="http://www.apache.org/">
                    <img src="https://www.apache.org/foundation/press/kit/feather.svg" alt="[Apache]">
                </a>
                
                <a class="brand-brooklyn" href="/brooklyn-docs/"><img src="/brooklyn-docs/style/img/apache-brooklyn-logo-244px-wide.png" alt="brooklyn"></a>
                
            </div>
        </div>
        <div class="collapse navbar-collapse" id="main-menu">


            <ul class="nav navbar-nav navbar-right">
                
                <li class="dropdown">
                    
                    <a href="/brooklyn-docs/learnmore/index.html" data-toggle="dropdown">learn more <span class="caret"></span></a>
                    
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="/brooklyn-docs/learnmore/index.html">Learn More</a>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li >
                            <a href="/brooklyn-docs/learnmore/blueprint-tour.html">Blueprint Tour
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/learnmore/features/index.html">Features
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/learnmore/theory.html">Theory
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/learnmore/catalog/index.html">Browse Catalog
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                    </ul>
                    
                    
                </li>
                
                <li class="dropdown">
                    
                    <a href="/brooklyn-docs/v/latest/start/index.html" data-toggle="dropdown">get started <span class="caret"></span></a>
                    
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="/brooklyn-docs/v/latest/start/index.html">Get Started</a>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/start/running.html">Running Apache Brooklyn
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/start/blueprints.html">Deploying Blueprints
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/start/managing.html">Monitoring and Managing Applications
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/start/policies.html">Policies
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/start/concept-quickstart.html">Brooklyn Concepts Quickstart
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                    </ul>
                    
                    
                </li>
                
                <li class="dropdown">
                    
                    <a href="/brooklyn-docs/documentation/index.html" data-toggle="dropdown">documentation <span class="caret"></span></a>
                    
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="/brooklyn-docs/documentation/index.html">Documentation</a>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li class="section">
                            <a href="/brooklyn-docs/v/latest/index.html">User Guide
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/blueprints/creating-yaml.html">Writing Blueprints
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/locations/index.html">Deploying Blueprints
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li class="section">
                            <a href="/brooklyn-docs/v/latest/ops/index.html">Reference Guide
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/dev/index.html">Developer Guide
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        <li class="divider"></li>
                        <li >
                            <a href="/brooklyn-docs/meta/versions.html">Versions
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/documentation/other-docs.html">Other Resources
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                    </ul>
                    
                    
                </li>
                
                <li class="dropdown">
                    
                    <a href="/brooklyn-docs/community/index.html" data-toggle="dropdown">community <span class="caret"></span></a>
                    
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="/brooklyn-docs/community/index.html">Community</a>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li >
                            <a href="/brooklyn-docs/community/mailing-lists.html">Mailing Lists
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/community/irc.html">IRC
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/community/security/index.html">Security Advisories
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="https://issues.apache.org/jira/browse/BROOKLYN">Bug Tracker (JIRA)
                                &nbsp;<span class="octicon octicon-link-external"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/community/how-to-contribute-docs.html">Contributing Documentation
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                    </ul>
                    
                    
                </li>
                
                <li class="dropdown">
                    
                    <a href="/brooklyn-docs/developers/index.html" data-toggle="dropdown">developers <span class="caret"></span></a>
                    
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="/brooklyn-docs/developers/index.html">Developers</a>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li >
                            <a href="/brooklyn-docs/developers/code/index.html">Get the Code
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/developers/how-to-contribute.html">How to Contribute
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/dev/index.html">Developer Guide
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/developers/committers/index.html">Committer Guide
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/developers/code-standards.html">Code Standards
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/developers/links.html">Handy Places
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="http://github.com/apache/brooklyn">GitHub
                                &nbsp;<span class="octicon octicon-link-external"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="https://issues.apache.org/jira/browse/BROOKLYN">Bug Tracker (JIRA)
                                &nbsp;<span class="octicon octicon-link-external"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                    </ul>
                    
                    
                </li>
                
                <li class="dropdown">
                    
                    <form class="navbar-form">
                        <a href="/brooklyn-docs/download/index.html" class="btn btn-default">download</a>
                    </form>
                    
                </li>
                
            </ul>
        </div>
    </div>
</nav>


<main>
    <div class="container">
        <div class="row">
            <div class="col-md-9 content">
                <div id="page_notes"></div>
                <h1>Contributing to the Docs</h1>
                <p>The Apache Brooklyn documentation is written in <a href="http://kramdown.gettalong.org/syntax.html" target="_blank">kramdown</a> a superset of Markdown 
which is processed into HTML using <a href="https://jekyllrb.com/" target="_blank">Jekyll</a>. In addition to the standard set of options
and notation available with these platforms, a number of custom plug-ins have been implemented specifically
for the Apache Brooklyn docs. These are detailed below:</p>

<p>Jekyll plug-ins are written in ruby and kept in the <code>_plugins</code> folder. Note that if you’re using <code>jekyll serve</code> to
display the site, changes to these plug-ins will not be reflected in the rendered site until jekyll is restarted. </p>

<h2 id="site-structure">Site Structure</h2>

<p>The site structure and menus are built by a plug-in in <code>site_structure.rb</code>. This plug-in looks in the <a href="https://jekyllrb.com/docs/frontmatter/" target="_blank">YAML front matter</a> 
for child pages to build the structure, and breadcrumbs to determine the parent pages to display. </p>

<p>Child pages are a list of objects, stored in the field <code>children</code>. These are defined by string path to a file or a YAML 
object with a <code>path</code> to another file, or a <code>link</code> to an external URL. In addition a <code>title</code> can be defined 
for the text content of the HTML menu option. See the example below from 
<a href="https://github.com/apache/brooklyn-docs/blob/master/guide/index.md" target="_blank">/guide/index.md</a></p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">breadcrumbs</span><span class="p-Indicator">:</span>
<span class="p-Indicator">-</span> <span class="l-Scalar-Plain">/website/documentation/index.md</span>
<span class="p-Indicator">-</span> <span class="l-Scalar-Plain">index.md</span>
<span class="l-Scalar-Plain">children</span><span class="p-Indicator">:</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/start/index.md</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/misc/download.md</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/concepts/index.md</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/blueprints/index.md</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/java/index.md</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/ops/index.md</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/misc/index.md</span> <span class="p-Indicator">}</span></code></pre></div>

<h3 id="inline-children">Inline Children</h3>

<p>In addition to the <code>children</code> property defining lower pages in the site structure, they can also be used to define
inline sections within the current document. Inclusion in this way produces a menu link to an anchor in the current page.</p>

<p>Below is an example from <a href="https://github.com/apache/brooklyn-docs/blob/master/guide/ops/persistence/index.md" target="_blank">/guide/ops/persistence/index.md</a>:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">children</span><span class="p-Indicator">:</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">section</span><span class="p-Indicator">:</span> <span class="nv">Command Line Options</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">section</span><span class="p-Indicator">:</span> <span class="nv">File-based Persistence</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">section</span><span class="p-Indicator">:</span> <span class="nv">Object Store Persistence</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">section</span><span class="p-Indicator">:</span> <span class="nv">Rebinding to State</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">section</span><span class="p-Indicator">:</span> <span class="nv">Writing Persistable Code</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">section</span><span class="p-Indicator">:</span> <span class="nv">Persisted State Backup</span> <span class="p-Indicator">}</span></code></pre></div>

<p>Inline sections can also be detected from separate, child <code>.md</code> files. Including the tag <code>check_directory_for_children: true</code>
in the YAML front matter of a page causes the site structure plug-in to look through the current directory for any <code>.md</code> files
containing <code>section_type: inline</code> in the YAML front matter.</p>

<p>The content from these inline sections can then be included in the page content using the liquid tag <code>child_content</code>. This is shown below
in an example from <a href="https://github.com/apache/brooklyn-docs/blob/master/guide/locations/index.md" target="_blank">/guide/locations/index.md</a>:</p>

<pre>
---
title: Locations
layout: website-normal
check_directory_for_children: true
---

Locations are the environments to which Brooklyn deploys applications, including:

Brooklyn supports a wide range of locations:

* &lt;a href="#clouds"&gt;Clouds&lt;/a&gt;, where it will provision machines
* &lt;a href="#localhost"&gt;Localhost&lt;/a&gt; (e.g. your laptop), 
  where it will deploy via `ssh` to `localhost` for rapid testing
* &lt;a href="#byon"&gt;BYON&lt;/a&gt;, where you "bring your own nodes",
  specifying already-existing hosts to use
* And many others, including object stores and online services

Configuration can be set in `~/.brooklyn/brooklyn.properties`
or directly in YAML when specifying a location.
On some entities, config keys determining matching selection and provisioning behavior
can also be set in `provisioning.properties`.

{&#37; child_content &#37;}</pre>

<h3 id="child-page-ordering">Child Page Ordering</h3>

<p>Child pages are by default, ordered by their position in the <code>children</code> YAML front matter field. This can be changed using the property
<code>section_position</code> in the child YAML. For children defined in the front matter this is put in the child object of the <code>children</code> array.</p>

<p>For inline children, sourced using <code>check_directory_for_children: true</code>, this <code>section_position</code> property is put in the child file’s YAML front matter.</p>

<p>The format for <code>section_position</code> is that of software versioning, i.e <code>A.B... Z</code> where A, B etc are numbers of decreasing value. Position <code>1.1.0</code> would appear
before version <code>1.0.4</code> for example. This allows an infinite number of sub pages between each <code>section_position</code>.</p>

<p>Any un-versioned pages are automatically numbered to add a new minor version from the last page if that was numbered or increment the minor
if it was not. If no pages are yet numbered, the numbering is started at <code>1.1</code>. For example, if a numbered page, <code>1.4</code> is followed by a 
non-numbered page, the non-numbered page would be auto-numbered as <code>1.4.1</code>. If this page is followed by another non-numbered page it would
be auto-numbered as <code>1.4.2</code>.</p>

<p>For example, a set of children pages numbered like this:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">children</span><span class="p-Indicator">:</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/start/index.md</span><span class="p-Indicator">,</span> <span class="nv">section_position</span><span class="p-Indicator">:</span> <span class="nv">3.1.2</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/misc/download.md</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/concepts/index.md</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/blueprints/index.md</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/blueprints/java/index.md</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/ops/index.md</span><span class="p-Indicator">,</span> <span class="nv">section_position</span><span class="p-Indicator">:</span> <span class="nv">2</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/misc/index.md</span> <span class="p-Indicator">}</span></code></pre></div>

<p>Would end up numbered like this:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">children</span><span class="p-Indicator">:</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/ops/index.md</span><span class="p-Indicator">,</span> <span class="nv">section_position</span><span class="p-Indicator">:</span> <span class="nv">2</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/misc/index.md</span><span class="p-Indicator">,</span> <span class="nv">section_position</span><span class="p-Indicator">:</span> <span class="nv">2.1</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/start/index.md</span><span class="p-Indicator">,</span> <span class="nv">section_position</span><span class="p-Indicator">:</span> <span class="nv">3.1.2</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/misc/download.md</span><span class="p-Indicator">,</span> <span class="nv">section_position</span><span class="p-Indicator">:</span> <span class="nv">3.1.2.1</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/concepts/index.md</span><span class="p-Indicator">,</span> <span class="nv">section_position</span><span class="p-Indicator">:</span> <span class="nv">3.1.2.2</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/yaml/index.md</span><span class="p-Indicator">,</span> <span class="nv">section_position</span><span class="p-Indicator">:</span> <span class="nv">3.1.2.3</span> <span class="p-Indicator">}</span>
<span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">/guide/java/index.md</span><span class="p-Indicator">,</span> <span class="nv">section_position</span><span class="p-Indicator">:</span> <span class="nv">3.1.2.4</span> <span class="p-Indicator">}</span></code></pre></div>

<p>This ordering affects both the position of the child in the html menu and the order of content included with <code>child_content</code>.</p>

<h2 id="single-page-manual--pdf">Single Page Manual &amp; PDF</h2>

<p>A single page overview of selections of the site are available in <code>zoneMergeManual</code> and <code>zoneMergeStarted</code>. These overviews are for the user manual
and getting started guide respectively. The zone merge pages go through the <a href="#site-structure">site structure</a>, described above, and compile the files from this into a
single HTML page.</p>

<p>In order to do this, each page is iterated over in order and it’s rendered content included in the page. The plug-in <code>regex_filter.rb</code> is used to re-write
 &lt;a&gt; links from the structured site into a form which works on a single page. Links are re-written in the following manner:</p>

<ul>
  <li>If the link is from an external domain, leave it as an unaltered link</li>
  <li>If the link is an anchor, convert to the anchor scheme used in the single page</li>
  <li>If the link target is in the single page, change the link to point at the anchor in the single page</li>
  <li>If the link is pointing at somewhere on the brooklyn site which is not included in this single page, point to the website with a specific version, so https://brooklyn.apache.org/v/0.9.0-SNAPSHOT/start/concept-quickstart.html for instance</li>
</ul>

<p>In addition, all images src’s are re-written relative to the root directory.</p>

<p>Pages can be masked from the compilation process by defining a <code>page_mask</code> in the YAML front matter of the zone merge file, then including this mask as <code>true</code> in the child page to exclude.
These pages will then not be included in the compiled single page. Note that this will mask both the child page and any children of this masked page. 
For example <a href="https://github.com/apache/brooklyn-docs/blob/master/zoneMergeStarted.html" target="_blank">zoneMergeStarted</a> uses the mask <code>started-pdf-exclude</code>:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Apache Brooklyn Manual</span>
<span class="l-Scalar-Plain">layout</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">singlePage</span>
<span class="l-Scalar-Plain">page_mask</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">started-pdf-exclude</span>
<span class="nn">...</span></code></pre></div>

<p>Then in latter pages, such as <a href="https://github.com/apache/brooklyn-docs/blob/master/guide/ops/index.md" target="_blank">/guide/ops/index.md</a> include <code>started-pdf-exclude: true</code> to
exclude this section from the getting started guide.</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Operations</span>
<span class="l-Scalar-Plain">started-pdf-exclude</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
<span class="nn">...</span></code></pre></div>

<p>This will exclude not only the operations page but all of the operations section.</p>

<p>Specific content can be also be masked or unmasked at a page component level by specifying CSS show and hide classes:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">css_hide_class</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">usermanual-pdf-exclude</span>
<span class="l-Scalar-Plain">css_show_class</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">usermanual-pdf-include</span></code></pre></div>

<p>If the above YAML is included in the front matter of a zone merge file, the classes <code>usermanual-pdf-exclude</code> and <code>usermanual-pdf-include</code> will add or remove a
<code>display: none</code> to a HTML object. In addition the single page theme files <a href="https://github.com/apache/brooklyn-docs/blob/master/_layouts/singlePage.html" target="_blank">singlePage.html</a> and
<a href="https://github.com/apache/brooklyn-docs/blob/master/style/css/singlePage.css">singlePage.css</a> can be used to style only the single merged pages.</p>

<h3 id="conversion-to-pdf">Conversion to PDF</h3>

<p>These single merged pages are then converted to PDF using wkhtmltopdf in the build scripts of this site.</p>


            </div>

            <aside class="col-md-3">
                <div class="list-group side-menu" id="side-menu">



  
     
              
              
                 
                
                  
                  <a href="/brooklyn-docs/contributing/index.html#site-structure" class="list-group-item">Site Structure
                    </a>
                
              
                 
                
                  
                  <a href="/brooklyn-docs/contributing/index.html#inline-children" class="list-group-item">Inline Children
                    </a>
                
              
                 
                
                  
                  <a href="/brooklyn-docs/contributing/index.html#child-page-ordering" class="list-group-item">Child Page Ordering
                    </a>
                
              
                 
                
                  
                  <a href="/brooklyn-docs/contributing/index.html#single-page-manual-pdf" class="list-group-item">Single Page Manual & PDF
                    </a>
                
              
        
        
  

        
</div>
<div id="width_reference"></div>


<script language="JavaScript" type="application/javascript">
(function($){
    
    sidemenu_x_sizer=function(){ $('#side-menu').width($('#side-menu').parent().find('#width_reference').outerWidth()); };
    $(sidemenu_x_sizer);
    $(window).resize(sidemenu_x_sizer);

    
    sidemenu_y_nonfloater=function(){
      if ($('#side-menu').outerHeight(true) + $('#header').outerHeight(true) + $('#footer').outerHeight(true) > window.innerHeight ||
          $('#side-menu').width() >= $('#content_container').width()/2) {
        $('#side-menu').css('position', 'inherit');
      } else {
        // restore if screen has grown
        $('#side-menu').css('position', 'fixed');
      }
    };
    $(sidemenu_y_nonfloater);
    $(window).resize(sidemenu_y_nonfloater);

    

    var sideMenu = $("#side-menu"),
        sideItems = sideMenu.find("a"),
        // Anchors corresponding to menu items
        scrollItems = sideItems.map(function(){
          var item = $(this).attr("section-target");
          if (item && item.length) { return item; }
        });

    var highlight_section_last_top = -1;
    var highlight_section_completed = false;

    var highlight_section = function() {
       // Get container scroll position
       var highlight_section_new_top = $(this).scrollTop();
       if (highlight_section_new_top == highlight_section_last_top) return;
       var highlight_section_new_bottom = highlight_section_new_top + $(window).height();
       var scroll_advancing = (highlight_section_new_top > highlight_section_last_top);

       var last_item = null, active_item = $("#side-menu a.section#active");

       var found_top = false;
       var displayable_items = scrollItems.map(function(itemI){
         item = $(scrollItems[itemI]);
         if (item && item.length) {
           if (highlight_section_last_top == -1 || !highlight_section_completed) {
             // just opening page - take item matching hash, or otherwise the first item visible
             if (item.selector === window.location.hash || (item.offset().top > highlight_section_new_top - 20 && !found_top)) {
               found_top = true;
               if (item.selector === window.location.hash && item.offset().top < highlight_section_new_top + 60) {
                 // because of our top header, we need to scroll 64px down from any link
                 $('html, body').animate({scrollTop: item.offset().top - 64}, 0);
               }
               return item;
             }
           } else if (scroll_advancing) {
             // if scrolling advance, pick up a section when title starts before 1/3 height
             if (item.offset().top < highlight_section_new_top + $(window).height()/3)
               return item;

             // or if containing div is finished (usu the whole main content)
             div_containing_item = item.closest("div");
             if (div_containing_item.offset().top + div_containing_item.height() < highlight_section_new_bottom + 15)
               return item;
             // or when next title is visible
             if (last_item && item.offset().top < highlight_section_new_bottom + 15)
               return last_item;
           } else {
             // if scrolling back, pick up a section as soon as the title is visible,
             if (item.offset().top < highlight_section_new_top)
               return item;
             // or if title is before the 2/3 point
             // (not sure about this, probably want also to have
             // "AND the id.top is <= displayable_itemsrent_active_it.top" so we don't jump FORWARD a section
             // when scrolling BACK, with lots of tiny sections)
             if ((item.offset().top < highlight_section_new_top + 2*$(window).height()/3)
                 && (!active_item || !active_item.offset() || active_item.offset().top >= item.offset().top))
               return item;

           }
           last_item = item;
         }
       });
       if (!highlight_section_completed && document.readyState === "complete") {
         highlight_section_completed = true;
       }
       if (!displayable_items.length) {
         $("#side-menu a.section").removeClass("active");
       } else {
         displayable_items = displayable_items[displayable_items.length-1];
         var id = displayable_items && displayable_items.length ? displayable_items[0].id : "";
       // Set/remove active class
         new_active = $("#side-menu a.section").filter("[section-target='#"+id+"']");
         if (new_active.hasClass("active")) {
           // nothing needed
         } else {
           $("#side-menu a.section").removeClass("active");
           $("#side-menu a.section").filter("[section-target='#"+id+"']").addClass("active");
         }
       }

       highlight_section_last_top = highlight_section_new_top;
    };
    var highlight_new_section = function() {
      highlight_section_completed = false;
      highlight_section_last_top = -1;
      highlight_section();
    }

    $(window).scroll(highlight_section);
    $(highlight_new_section);

    // detect link change - courtesy http://www.bennadel.com/blog/1520-binding-events-to-non-dom-objects-with-jquery.htm

    // Default to the current location.
    var strLocation = window.location.href;
    var strHash = window.location.hash;
    var strPrevLocation = "";
    var strPrevHash = "";

    // This is how often we will be checkint for
    // changes on the location.
    var intIntervalTime = 100;

    // This method removes the pound from the hash.
    var fnCleanHash = function( strHash ){
        return(
            strHash.substring( 1, strHash.length )
            );
    }

    // This will be the method that we use to check
    // changes in the window location.
    var fnCheckLocation = function(){
        // Check to see if the location has changed.
        if (strLocation != window.location.href){

            // Store the new and previous locations.
            strPrevLocation = strLocation;
            strPrevHash = strHash;
            strLocation = window.location.href;
            strHash = window.location.hash;

            // The location has changed. Trigger a
            // change event on the location object,
            // passing in the current and previous
            // location values.
            $( window.location ).trigger(
                "change",
                {
                    currentHref: strLocation,
                    currentHash: fnCleanHash( strHash ),
                    previousHref: strPrevLocation,
                    previousHash: fnCleanHash( strPrevHash )
                }
                );

        }
    }

    // Set an interval to check the location changes.
    setInterval( fnCheckLocation, intIntervalTime );

    // and trigger highlight section on link change
    $(window.location).bind("change", highlight_new_section);
})(jQuery);

</script>

            </aside>
        </div>
    </div>
</main>

<footer class="container">
    <div class="row">
        <div class="col-md-9">
            <p>Apache Brooklyn is distributed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License v2.0</a>.</p>
        </div>
        <div class="col-md-3 text-right">
            <p>
                <a class="btn btn-sm btn-default" href="https://github.com/apache/brooklyn-docs/edit/master/contributing/index.md">Edit This Page</a>
                <a href="https://brooklyn.apache.org/community/how-to-contribute-docs.html"
                    data-toggle="tooltip" data-placement="top" title="" data-delay="400" data-original-title="How to Edit Documentation">
                    <span class="octicon octicon-question octicon-footer"></span>
                </a>
            </p>
        </div>
    </div>
</footer>

</body>

<!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
  -->

<script type="text/javascript" src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/brooklyn-docs/style/deps/jquery.cookie.js"></script>
<script type="text/javascript" src="/brooklyn-docs/style/js/zeroclipboard/ZeroClipboard.min.js"></script>
<script type="text/javascript" src="/brooklyn-docs/style/deps/tooltip.js"></script>

<script type="text/javascript">
    ZeroClipboard.config({ moviePath: '/style/js/zeroclipboard/ZeroClipboard.swf' });
</script>
<script src="/brooklyn-docs/style/js/public.js"></script>
</html>
