<!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
  -->

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Getting Started - Policies - Apache Brooklyn</title>

<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" />
<link href="/brooklyn-docs/style/deps/octicons/octicons.css" rel="stylesheet" />
<link href="/brooklyn-docs/style/deps/bootstrap-theme.css" rel="stylesheet" />
<link href="/brooklyn-docs/style/deps/font-awesome-4.2.0/css/font-awesome.min.css" rel="stylesheet" />
<link href="/brooklyn-docs/style/deps/tooltip.css" rel="stylesheet" />
<link href="/brooklyn-docs/style/css/code.css" rel="stylesheet" />
<link href="/brooklyn-docs/style/css/website.css" rel="stylesheet" />

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>

<body class="page">
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div class="navbar-brand">
                <a class="brand-apache" href="http://www.apache.org/">
                    <img src="https://www.apache.org/foundation/press/kit/feather.svg" alt="[Apache]">
                </a>
                
                <a class="brand-brooklyn" href="/brooklyn-docs/"><img src="/brooklyn-docs/style/img/apache-brooklyn-logo-244px-wide.png" alt="brooklyn"></a>
                
            </div>
        </div>
        <div class="collapse navbar-collapse" id="main-menu">


            <ul class="nav navbar-nav navbar-right">
                
                <li class="dropdown">
                    
                    <a href="/brooklyn-docs/learnmore/index.html" data-toggle="dropdown">learn more <span class="caret"></span></a>
                    
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="/brooklyn-docs/learnmore/index.html">Learn More</a>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li >
                            <a href="/brooklyn-docs/learnmore/blueprint-tour.html">Blueprint Tour
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/learnmore/features/index.html">Features
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/learnmore/theory.html">Theory
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/learnmore/catalog/index.html">Browse Catalog
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                    </ul>
                    
                    
                </li>
                
                <li class="dropdown active">
                    
                    <a href="/brooklyn-docs/v/latest/start/index.html" data-toggle="dropdown">get started <span class="caret"></span></a>
                    
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="/brooklyn-docs/v/latest/start/index.html">Get Started</a>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/start/running.html">Running Apache Brooklyn
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/start/blueprints.html">Deploying Blueprints
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/start/managing.html">Monitoring and Managing Applications
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/start/policies.html">Policies
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/start/concept-quickstart.html">Brooklyn Concepts Quickstart
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                    </ul>
                    
                    
                </li>
                
                <li class="dropdown">
                    
                    <a href="/brooklyn-docs/documentation/index.html" data-toggle="dropdown">documentation <span class="caret"></span></a>
                    
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="/brooklyn-docs/documentation/index.html">Documentation</a>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li class="section">
                            <a href="/brooklyn-docs/v/latest/index.html">User Guide
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/blueprints/creating-yaml.html">Writing Blueprints
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/locations/index.html">Deploying Blueprints
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li class="section">
                            <a href="/brooklyn-docs/v/latest/ops/index.html">Reference Guide
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/dev/index.html">Developer Guide
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        <li class="divider"></li>
                        <li >
                            <a href="/brooklyn-docs/meta/versions.html">Versions
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/documentation/other-docs.html">Other Resources
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                    </ul>
                    
                    
                </li>
                
                <li class="dropdown">
                    
                    <a href="/brooklyn-docs/community/index.html" data-toggle="dropdown">community <span class="caret"></span></a>
                    
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="/brooklyn-docs/community/index.html">Community</a>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li >
                            <a href="/brooklyn-docs/community/mailing-lists.html">Mailing Lists
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/community/irc.html">IRC
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/community/security/index.html">Security Advisories
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="https://issues.apache.org/jira/browse/BROOKLYN">Bug Tracker (JIRA)
                                &nbsp;<span class="octicon octicon-link-external"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/community/how-to-contribute-docs.html">Contributing Documentation
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                    </ul>
                    
                    
                </li>
                
                <li class="dropdown">
                    
                    <a href="/brooklyn-docs/developers/index.html" data-toggle="dropdown">developers <span class="caret"></span></a>
                    
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="/brooklyn-docs/developers/index.html">Developers</a>
                        </li>
                        <li class="divider"></li>
                        
                        
                        <li >
                            <a href="/brooklyn-docs/developers/code/index.html">Get the Code
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/developers/how-to-contribute.html">How to Contribute
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/v/latest/dev/index.html">Developer Guide
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/developers/committers/index.html">Committer Guide
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/developers/code-standards.html">Code Standards
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="/brooklyn-docs/developers/links.html">Handy Places
                                </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="http://github.com/apache/brooklyn">GitHub
                                &nbsp;<span class="octicon octicon-link-external"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                        
                        <li >
                            <a href="https://issues.apache.org/jira/browse/BROOKLYN">Bug Tracker (JIRA)
                                &nbsp;<span class="octicon octicon-link-external"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li>test 1</li>
                                <li>test 1</li>
                                <li>test 1</li>
                            </ul>
                        </li>
                        
                        
                    </ul>
                    
                    
                </li>
                
                <li class="dropdown">
                    
                    <form class="navbar-form">
                        <a href="/brooklyn-docs/download/index.html" class="btn btn-default">download</a>
                    </form>
                    
                </li>
                
            </ul>
        </div>
    </div>
</nav>


<main>
    <div class="container">
        <div class="row">
            <div class="col-md-9 content">
                <div id="page_notes"></div>
                <h1>Getting Started - Policies</h1>
                <h2 id="a-clustered-example">A Clustered Example</h2>

<p>We’ll now look at a more complex example that better shows the capabilities of Brooklyn, including
management of a running clustered application.</p>

<p>Below is the annotated blueprint. <a href="example_yaml/mycluster.yaml">Download the blueprint</a> into a 
text file, <code>mycluster.yaml</code>, in your workspace. <em>Before</em> you create an application with it, 
review and/or change the the location where the application will be deployed.</p>

<p>You will need four machines for this example: one for the load-balancer (nginx), and three for the 
Tomcat cluster (but you can reduce this by changing the <code>maxPoolSize</code> below).</p>

<div class="usermanual-pdf-include started-pdf-include" style="display: none;">

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Tomcat Cluster</span>

<span class="l-Scalar-Plain">location</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">byon</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">vagrant</span>
    <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">vagrant</span>
    <span class="l-Scalar-Plain">hosts</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">10.10.10.101</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">10.10.10.102</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">10.10.10.103</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">10.10.10.104</span>
 
<span class="l-Scalar-Plain">services</span><span class="p-Indicator">:</span>
<span class="p-Indicator">-</span> <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">org.apache.brooklyn.entity.group.DynamicCluster</span>
  <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Cluster</span>
  <span class="l-Scalar-Plain">id</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">cluster</span>
  <span class="l-Scalar-Plain">brooklyn.config</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">cluster.initial.size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>
    <span class="l-Scalar-Plain">dynamiccluster.memberspec</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">$brooklyn:entitySpec</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">org.apache.brooklyn.entity.webapp.tomcat.TomcatServer</span>
        <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Tomcat Server</span>
        <span class="l-Scalar-Plain">brooklyn.config</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">wars.root</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://search.maven.org/remotecontent?filepath=org/apache/brooklyn/example/brooklyn-example-hello-world-webapp/0.8.0-incubating/brooklyn-example-hello-world-webapp-0.8.0-incubating.war</span>
 
        <span class="l-Scalar-Plain">brooklyn.policies</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">org.apache.brooklyn.policy.ha.ServiceRestarter</span>
          <span class="l-Scalar-Plain">brooklyn.config</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">failOnRecurringFailuresInThisDuration</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">5m</span>
        <span class="l-Scalar-Plain">brooklyn.enrichers</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">org.apache.brooklyn.policy.ha.ServiceFailureDetector</span>
          <span class="l-Scalar-Plain">brooklyn.config</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">entityFailed.stabilizationDelay</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">30s</span>
 
  <span class="l-Scalar-Plain">brooklyn.policies</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">org.apache.brooklyn.policy.ha.ServiceReplacer</span>
 
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">org.apache.brooklyn.policy.autoscaling.AutoScalerPolicy</span>
    <span class="l-Scalar-Plain">brooklyn.config</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">metric</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">webapp.reqs.perSec.perNode</span>
      <span class="l-Scalar-Plain">metricUpperBound</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">3</span>
      <span class="l-Scalar-Plain">metricLowerBound</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>
      <span class="l-Scalar-Plain">resizeUpStabilizationDelay</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">2s</span>
      <span class="l-Scalar-Plain">resizeDownStabilizationDelay</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1m</span>
      <span class="l-Scalar-Plain">maxPoolSize</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">3</span>

  <span class="l-Scalar-Plain">brooklyn.enrichers</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">org.apache.brooklyn.enricher.stock.Aggregator</span>
    <span class="l-Scalar-Plain">brooklyn.config</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">enricher.sourceSensor</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">$brooklyn:sensor(&quot;webapp.reqs.perSec.windowed&quot;)</span>
      <span class="l-Scalar-Plain">enricher.targetSensor</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">$brooklyn:sensor(&quot;webapp.reqs.perSec.perNode&quot;)</span>
      <span class="l-Scalar-Plain">enricher.aggregating.fromMembers</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
      <span class="l-Scalar-Plain">transformation</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">average</span>

<span class="p-Indicator">-</span> <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">org.apache.brooklyn.entity.proxy.nginx.NginxController</span>
  <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Load Balancer (nginx)</span>
  <span class="l-Scalar-Plain">brooklyn.config</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">loadbalancer.serverpool</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">$brooklyn:entity(&quot;cluster&quot;)</span>
    <span class="l-Scalar-Plain">nginx.sticky</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span></code></pre></div>

</div>

<!-- WARNING: if modifying either mycluster.yaml or the yaml below, be sure to keep them both in-sync -->

<div class="jumobotron annotated_blueprint">
  <div class="code_scroller">
    <div class="initial_notice"><div><div>
      Hover over an element to learn more
      <div class="ann_light">This message will go away in <span id="countdown">3s</span></div>
      <div class="ann_play fa fa-play-circle-o"></div>
    </div></div></div>
    <div class="code_viewer">
  
<div class="block">
      <div class="annotations_wrapper1"><div class="annotations_wrapper2"><div class="annotations">
        <div class="short">
          Describe your application
        </div>
        <div class="long"><p>
            Start by giving it a name, optionally adding a version and other metadata.
        </p></div>
      </div><div class="connector"><div>&nbsp;</div></div></div></div>
<div><span class="ann_highlight">name: Tomcat Cluster</span>
</div></div>

<div class="block">
      <div class="annotations_wrapper1"><div class="annotations_wrapper2"><div class="annotations">
        <div class="short">
          Define the target location
        </div>
        <div class="long"><p>
          Blueprints are designed for portability.
          Pick from dozens of clouds in hundreds of datacenters. 
          Or machines with fixed IP addresses, localhost, 
          Docker on <a href="http://clocker.io">Clocker</a>, etc.
        </p><p>
          Here we target pre-existing Vagrant VMs.
        </p></div>
      </div><div class="connector"><div>&nbsp;</div></div></div></div>
<div><span class="ann_highlight">location:</span>
  byon:
    user: vagrant
    password: vagrant
    hosts:
      - 10.10.10.101
      - 10.10.10.102
      - 10.10.10.103
      - 10.10.10.104
</div></div>

<div class="block">
      <div class="annotations_wrapper1"><div class="annotations_wrapper2"><div class="annotations">
        <div class="short">
          Define a cluster
        </div>
        <div class="long"><p>
            Choose your cluster type.
          </p><p>
            Customize with config keys, such as the initial size. Define the members of the cluster.
        </p></div>
      </div><div class="connector"><div>&nbsp;</div></div></div></div>
<div>services:
<span class="ann_highlight">- type: org.apache.brooklyn.entity.group.DynamicCluster</span>
  name: Cluster
  id: cluster
  brooklyn.config:
    cluster.initial.size: 1
    dynamiccluster.memberspec:
      $brooklyn:entitySpec:
        type: org.apache.brooklyn.entity.webapp.tomcat.TomcatServer
        name: Tomcat Server
        brooklyn.config:
          wars.root: http://search.maven.org/remotecontent?filepath=org/apache/brooklyn/example/brooklyn-example-hello-world-webapp/0.8.0-incubating/brooklyn-example-hello-world-webapp-0.8.0-incubating.war
</div></div>

<div class="block">
      <div class="annotations_wrapper1"><div class="annotations_wrapper2"><div class="annotations">
        <div class="short">
          Tomcat auto-repair policy
        </div>
        <div class="long"><p>
            For each member of the cluster, include an auto-repair policy that restarts the service.
            </p><p>
            If it repeatedly fails, the service will be propagate a failure notification.
        </p></div>
      </div><div class="connector"><div>&nbsp;</div></div></div></div>
<div>        brooklyn.policies:
<span class="ann_highlight">        - type: org.apache.brooklyn.policy.ha.ServiceRestarter</span>
          brooklyn.config:
            failOnRecurringFailuresInThisDuration: 5m
        brooklyn.enrichers:
<span class="ann_highlight">        - type: org.apache.brooklyn.policy.ha.ServiceFailureDetector</span>
          brooklyn.config:
            entityFailed.stabilizationDelay: 30s
</div></div>

<div class="block">
      <div class="annotations_wrapper1"><div class="annotations_wrapper2"><div class="annotations">
        <div class="short">
          Cluster auto-replace policy
        </div>
        <div class="long"><p>
            On the cluster, handle a member's failure by replacing it with a brand new member.
        </p></div>
      </div><div class="connector"><div>&nbsp;</div></div></div></div>
<div>  brooklyn.policies:
<span class="ann_highlight">  - type: org.apache.brooklyn.policy.ha.ServiceReplacer</span>
</div></div>

<div class="block">
      <div class="annotations_wrapper1"><div class="annotations_wrapper2"><div class="annotations">
        <div class="short">
          Auto-scaling policy
        </div>
        <div class="long"><p>
            Auto-scale the cluster, based on runtime metrics of the cluster.
            </p><p>
            For a simplistic demonstration, this uses requests per second.
        </p></div>
      </div><div class="connector"><div>&nbsp;</div></div></div></div>
<div><span class="ann_highlight">  - type: org.apache.brooklyn.policy.autoscaling.AutoScalerPolicy</span>
    brooklyn.config:
      metric: webapp.reqs.perSec.perNode
      metricUpperBound: 3
      metricLowerBound: 1
      resizeUpStabilizationDelay: 2s
      resizeDownStabilizationDelay: 1m
      maxPoolSize: 3
</div></div>

<div class="block">
      <div class="annotations_wrapper1"><div class="annotations_wrapper2"><div class="annotations">
        <div class="short">
          Aggregate the member's metrics.
        </div>
        <div class="long"><p>
            Add an enricher to aggregate the member's requests per second.
            </p><p>
            For a simplistic demonstration, this uses requests per second.
        </p></div>
      </div><div class="connector"><div>&nbsp;</div></div></div></div>
<div>  brooklyn.enrichers:
<span class="ann_highlight">  - type: org.apache.brooklyn.enricher.stock.Aggregator</span>
    brooklyn.config:
      enricher.sourceSensor: $brooklyn:sensor("webapp.reqs.perSec.windowed")
      enricher.targetSensor: $brooklyn:sensor("webapp.reqs.perSec.perNode")
      enricher.aggregating.fromMembers: true
      transformation: average
</div></div>

<div class="block">
      <div class="annotations_wrapper1"><div class="annotations_wrapper2"><div class="annotations">
        <div class="short">
          Define a load-balancer
        </div>
        <div class="long"><p>
            Add a load balancer entity.
          </p><p>
            Configure it to monitor and balance across the cluster of Tomcat servers, which was given:
          </p><p>
            id: cluster
        </p></div>
      </div><div class="connector"><div>&nbsp;</div></div></div></div>
<div><span class="ann_highlight">- type: org.apache.brooklyn.entity.proxy.nginx.NginxController</span>
  name: Load Balancer (nginx)
  brooklyn.config:
    loadbalancer.serverpool: $brooklyn:entity("cluster")
    nginx.sticky: false
</div></div>

  </div></div>
</div>

<script language="JavaScript" type="application/javascript">

 

if (window.$ != null) {
	$(function() {
	  maxCodeWidth = Math.max.apply(Math, $(".annotated_blueprint div.block > div:last-child").map(function(){ return this.scrollWidth; }).get());
	  $(".annotated_blueprint div.block").width(maxCodeWidth);
	})
	
	$(".annotated_blueprint .code_scroller .initial_notice > div").height($(".annotated_blueprint .code_scroller .code_viewer").height());
	$(".annotated_blueprint .code_scroller .initial_notice > div").width($(".annotated_blueprint .code_scroller").width());
	$(".annotated_blueprint .code_scroller").hover(function() {
	  $(".annotated_blueprint .initial_notice").css("display", "none");
	});
	$(function() {
	  setTimeout(function() { $(".annotated_blueprint .initial_notice").hide(400); }, 3000);
	  setTimeout(function() { $(".annotated_blueprint #countdown").text("2s"); }, 1000);
	  setTimeout(function() { $(".annotated_blueprint #countdown").text("1s"); }, 2000);
	});
	}
</script>

<h2 id="the-tomcat-cluster">The Tomcat Cluster</h2>

<p>The <code>DynamicCluster</code> can dynamically increase or decrease the number of members. Resizing the 
cluster can either be carried out manually via effectors or automatically by attaching an 
<code>AutoScalerPolicy</code>.</p>

<p>It is configured with a <code>dynamiccluster.memberspec</code>, which defines the type and configurtion of members
in the cluster. In our example, each is a Tomcat server with a WAR deployed at the root URL.</p>

<p>Deploy the app:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">br deploy mycluster.yaml</code></pre></div>

<pre>
 Id:       nGY58ZZN   
 Name:     Tomcat Cluster   
 Status:   In progress   
</pre>

<p>And wait for the app to be running, viewing its state with:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">br application</code></pre></div>

<pre>
 Id         Name             Status    Location   
 nGY58ZZN   Tomcat Cluster   RUNNING   Mf0CJac6   
</pre>

<p>You can view the list of entities within the cluster with the command below (which drills into the 
application named “Tomcat Cluster”, then into its child entity named “Cluster”, and then lists its
entities):</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">br application <span class="s2">&quot;Tomcat Cluster&quot;</span> entity <span class="s2">&quot;Cluster&quot;</span> entity</code></pre></div>

<pre>
 Id         Name            Type   
 dYfUvLIw   quarantine      org.apache.brooklyn.entity.group.QuarantineGroup   
 tOpMeYYr   Tomcat Server   org.apache.brooklyn.entity.webapp.tomcat.TomcatServer   
</pre>

<p>The “quarantine” entity is used when Tomcat servers fail to start correctly - this entity is by 
default added to the quarantine group, where it can later be investigated. This can be disabled using
the configuration <code>dynamiccluster.quarantineFailedEntities: false</code>.</p>

<h2 id="tomcat-auto-repair">Tomcat auto-repair</h2>

<p>Each Tomcat entity has a <code>ServiceFailureDetector</code> enricher and a <code>ServiceRestarter</code> policy. </p>

<p>An <em>enricher</em> generates new events or sensor values (metrics) for the entity by modifying or 
aggregating data from one or more other sensors. A <em>policy</em> coordinates the runtime management of 
entities by carrying out actions, initiated by specific triggers. Policies are often used to keep 
the system in a healthy state, such as handling failures and auto-scaling.</p>

<p>The built-in functionality of the Tomcat entity is to use the “service.state” sensor to report 
its status. It will be “on-fire” when a failure is detected, or “running” when healthy, or one of
the other lifecycle states such as “starting”, “stopping” or “stopped”. </p>

<p>The <code>ServiceFailureDetector</code> enricher emits an “Entity Failed” event whenever a failure is detected, 
and similarly an “Entity Recovered” event when recovered. The configuration option 
<code>serviceOnFireStabilizationDelay</code> will suppress reporting of failure until the entity is detected 
as failed for the given duration. This is very useful so as not to over-react to temporary failures.</p>

<p>The <code>ServiceRestarter</code> policy attaches to an entity in order to restart the service on failure. If<br />
there are subsequent failures within a configurable time interval, or if the restart fails, the<br />
service entity is marked as failed and no futher restarts are attempted.</p>

<p>Try killing the Tomcat process for one of the members in the cluster. The command below will kill
Tomcat on the vagrant VMs named “byon1” to “byon4”:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">for</span> i in byon<span class="o">{</span>1..4<span class="o">}</span><span class="p">;</span> <span class="k">do</span>
  vagrant ssh <span class="k">${</span><span class="nv">i</span><span class="k">}</span> --command <span class="s1">&#39;ps aux | grep -i tomcat |  grep -v grep | awk &#39;</span><span class="se">\&#39;</span><span class="s1">&#39;{print $2}&#39;</span><span class="se">\&#39;</span><span class="s1">&#39; | xargs kill -9&#39;</span>
<span class="k">done</span></code></pre></div>

<p>You can view the state of the Tomcat server with the command below (which drills into the<br />
application named “Tomcat Cluster”, then into its child entity named “Cluster”, and then into the<br />
first member of the cluster named “Tomcat Server”):</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">br application <span class="s2">&quot;Tomcat Cluster&quot;</span> entity <span class="s2">&quot;Cluster&quot;</span> entity <span class="s2">&quot;Tomcat Server&quot;</span></code></pre></div>

<pre>
 Id:              tOpMeYYr   
 Name:            Tomcat Server   
 Status:          ON_FIRE   
 ServiceUp:       false   
 Type:            org.apache.brooklyn.entity.webapp.tomcat.TomcatServer   
 CatalogItemId:   org.apache.brooklyn.entity.webapp.tomcat.TomcatServer:0.0.0.SNAPSHOT   
</pre>

<!-- COMMENT:
You can view its activity, to see the call to restart, using:


<div class="highlight"><pre><code class="language-bash" data-lang="bash">br application <span class="s2">&quot;Tomcat Cluster&quot;</span> entity <span class="s2">&quot;Cluster&quot;</span> entity <span class="s2">&quot;Tomcat Server&quot;</span> activity</code></pre></div>


TODO Why doesn't the restart() show in the activity view?!
-->

<p>After the given <code>stabilizationDelay</code>, the Tomcat server will be automatically restarted.</p>

<h2 id="cluster-auto-replace">Cluster auto-replace</h2>

<p>The cluster has a <code>ServiceReplacer</code> policy. This attaches to a <code>DynamicCluster</code> and replaces a 
failed member; if this fails, it sets the Cluster state to on-fire.</p>

<p>To simulate a terminal failure of a member, repeatedly kill the process (using the command 
above).</p>

<p>The Tomcat server should be replaced by a new member of the cluster, and then the old failed member
removed.</p>

<p>You can view the list of Tomcat servers in the cluster with the command below (which drills into the<br />
application named “Tomcat Cluster”, then into its child entity named “Cluster”, and then lists the 
child entities):</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">br application <span class="s2">&quot;Tomcat Cluster&quot;</span> entity <span class="s2">&quot;Cluster&quot;</span> entity</code></pre></div>

<pre>
 Id         Name            Type   
 dYfUvLIw   quarantine      org.apache.brooklyn.entity.group.QuarantineGroup   
 tOpMeYYr   Tomcat Server   org.apache.brooklyn.entity.webapp.tomcat.TomcatServer   
 mgoRpkKH   Tomcat Server   org.apache.brooklyn.entity.webapp.tomcat.TomcatServer   
</pre>

<h2 id="auto-scaling">Auto-scaling</h2>

<p>The <code>AutoScalerPolicy</code> attaches to a <code>Resizable</code> entity (in this case the <code>DynamicCluster</code>) and 
dynamically adjusts its size in response to keeping a metric within a given range. It adds/removes 
members (e.g. Tomcat instances) automatically.</p>

<p>In this example policy, the <code>metricUpperBound</code> for requests per second per server is configured 
very low at just 3. This makes it simple to trigger auto-scaling. The <code>resizeUpStabilizationDelay</code> 
of 2 seconds means the load must be sustained for at least that length of time. The<br />
<code>resizeDownStabilizationDelay</code> of 1 minute means there must be low load for a full one minute 
before it will scale back down.</p>

<p>Find the URL of the load-balancer - see the <code>NginxController</code> sensor named <code>main.uri</code>.</p>

<p>To generate load, you can use your web-browser by repeatedly refreshing that page. Alternatively,
you could use a load generator like jmeter, or use a script such as the one shown below 
(changing URL for the URL of your load-balancer):</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">URL</span><span class="o">=</span>http://10.10.10.101:8000/
<span class="k">for</span> i in <span class="o">{</span>1..600<span class="o">}</span><span class="p">;</span> <span class="k">do</span>
  <span class="k">for</span> j in <span class="o">{</span>1..50<span class="o">}</span><span class="p">;</span> <span class="k">do</span> 
    curl --fail --silent <span class="k">${</span><span class="nv">URL</span><span class="k">}</span> &gt; /dev/null <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;Curl failed with exit code $?&quot;</span>
  <span class="k">done</span>
  <span class="nb">echo</span> <span class="s2">&quot;Finished batch $i&quot;</span>
  sleep 1
<span class="k">done</span></code></pre></div>

<p>While those curl commands run in a separate terminal, you can look at the metrics for the first
Tomcat server using the command:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">br application <span class="s2">&quot;Tomcat Cluster&quot;</span> entity <span class="s2">&quot;Cluster&quot;</span> entity <span class="s2">&quot;Tomcat Server&quot;</span> sensor</code></pre></div>

<pre>
 Name                                            Description                                                                              Value   
 ...
 webapp.reqs.perSec.last                         Reqs/sec (last datapoint)                                                                0.9980039920159681
 webapp.reqs.perSec.windowed                     Reqs/sec (over time window)                                                              0.9326571333555038
 webapp.reqs.processingTime.fraction.last        Fraction of time spent processing, reported by webserver (percentage, last datapoint)    "0.067%"
 webapp.reqs.processingTime.fraction.windowed    Fraction of time spent processing, reported by webserver (percentage, over time window)  "0.073%"
 webapp.reqs.processingTime.max                  Max processing time for any single request, reported by webserver (millis)               ""
 webapp.reqs.processingTime.total                Total processing time, reported by webserver (millis)                                    "3.12s"
 webapp.reqs.total                               Request count                                                                            5575
 webapp.tomcat.connectorStatus                   Catalina connector state name                                                            "STARTED"
 webapp.url                                      URL                                                                                      "http://10.10.10.103:18082/"
 ...
</pre>

<p>You can look at the average requests per second on the cluster with the command:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">br application <span class="s2">&quot;Tomcat Cluster&quot;</span> entity <span class="s2">&quot;Cluster&quot;</span> sensor <span class="s2">&quot;webapp.reqs.perSec.perNode&quot;</span></code></pre></div>

<pre>
 25.765557404326124
</pre>

<p>When this value exceeds 3 for two seconds, the cluster with scale up. You can see the new instance
using the command:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">br application <span class="s2">&quot;Tomcat Cluster&quot;</span> entity <span class="s2">&quot;Cluster&quot;</span> entity</code></pre></div>

<pre>
 Id         Name            Type   
 dYfUvLIw   quarantine      org.apache.brooklyn.entity.group.QuarantineGroup   
 mgoRpkKH   Tomcat Server   org.apache.brooklyn.entity.webapp.tomcat.TomcatServer   
 xpLeJufy   Tomcat Server   org.apache.brooklyn.entity.webapp.tomcat.TomcatServer   
 CpabLxZE   Tomcat Server   org.apache.brooklyn.entity.webapp.tomcat.TomcatServer   
</pre>

<p>Cancel the curl commands (or wait for them to finish), and then wait for the one minute 
<code>resizeDownStabilizationDelay</code>. The cluster will scale back to the minimum one instance.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">br application <span class="s2">&quot;Tomcat Cluster&quot;</span> entity <span class="s2">&quot;Cluster&quot;</span> entity</code></pre></div>

<pre>
 Id         Name            Type   
 dYfUvLIw   quarantine      org.apache.brooklyn.entity.group.QuarantineGroup   
 mgoRpkKH   Tomcat Server   org.apache.brooklyn.entity.webapp.tomcat.TomcatServer   
</pre>

            </div>

            <aside class="col-md-3">
                <div class="list-group side-menu" id="side-menu">



  
     
              
                  <h4 class="">
                    <a href="/brooklyn-docs/v/latest/start/index.html" class="list-group-item breadcrumb breadcrumb0">
                      Getting Started
                      </a></h4>
              
              
                 
                
                  
                  <a href="/brooklyn-docs/v/latest/start/running.html" class="list-group-item">Running Apache Brooklyn
                    </a>
                
              
                 
                
                  
                  <a href="/brooklyn-docs/v/latest/start/blueprints.html" class="list-group-item">Deploying Blueprints
                    </a>
                
              
                 
                
                  
                  <a href="/brooklyn-docs/v/latest/start/managing.html" class="list-group-item">Monitoring and Managing Applications
                    </a>
                
              
                 
                
                  
                  <a href="/brooklyn-docs/v/latest/start/policies.html" class="list-group-item active">Policies
                    </a>
                
              
                 
                
                  
                  <a href="/brooklyn-docs/v/latest/start/concept-quickstart.html" class="list-group-item">Brooklyn Concepts Quickstart
                    </a>
                
              
        
        
  

        
</div>
<div id="width_reference"></div>


<script language="JavaScript" type="application/javascript">
(function($){
    
    sidemenu_x_sizer=function(){ $('#side-menu').width($('#side-menu').parent().find('#width_reference').outerWidth()); };
    $(sidemenu_x_sizer);
    $(window).resize(sidemenu_x_sizer);

    
    sidemenu_y_nonfloater=function(){
      if ($('#side-menu').outerHeight(true) + $('#header').outerHeight(true) + $('#footer').outerHeight(true) > window.innerHeight ||
          $('#side-menu').width() >= $('#content_container').width()/2) {
        $('#side-menu').css('position', 'inherit');
      } else {
        // restore if screen has grown
        $('#side-menu').css('position', 'fixed');
      }
    };
    $(sidemenu_y_nonfloater);
    $(window).resize(sidemenu_y_nonfloater);

    

    var sideMenu = $("#side-menu"),
        sideItems = sideMenu.find("a"),
        // Anchors corresponding to menu items
        scrollItems = sideItems.map(function(){
          var item = $(this).attr("section-target");
          if (item && item.length) { return item; }
        });

    var highlight_section_last_top = -1;
    var highlight_section_completed = false;

    var highlight_section = function() {
       // Get container scroll position
       var highlight_section_new_top = $(this).scrollTop();
       if (highlight_section_new_top == highlight_section_last_top) return;
       var highlight_section_new_bottom = highlight_section_new_top + $(window).height();
       var scroll_advancing = (highlight_section_new_top > highlight_section_last_top);

       var last_item = null, active_item = $("#side-menu a.section#active");

       var found_top = false;
       var displayable_items = scrollItems.map(function(itemI){
         item = $(scrollItems[itemI]);
         if (item && item.length) {
           if (highlight_section_last_top == -1 || !highlight_section_completed) {
             // just opening page - take item matching hash, or otherwise the first item visible
             if (item.selector === window.location.hash || (item.offset().top > highlight_section_new_top - 20 && !found_top)) {
               found_top = true;
               if (item.selector === window.location.hash && item.offset().top < highlight_section_new_top + 60) {
                 // because of our top header, we need to scroll 64px down from any link
                 $('html, body').animate({scrollTop: item.offset().top - 64}, 0);
               }
               return item;
             }
           } else if (scroll_advancing) {
             // if scrolling advance, pick up a section when title starts before 1/3 height
             if (item.offset().top < highlight_section_new_top + $(window).height()/3)
               return item;

             // or if containing div is finished (usu the whole main content)
             div_containing_item = item.closest("div");
             if (div_containing_item.offset().top + div_containing_item.height() < highlight_section_new_bottom + 15)
               return item;
             // or when next title is visible
             if (last_item && item.offset().top < highlight_section_new_bottom + 15)
               return last_item;
           } else {
             // if scrolling back, pick up a section as soon as the title is visible,
             if (item.offset().top < highlight_section_new_top)
               return item;
             // or if title is before the 2/3 point
             // (not sure about this, probably want also to have
             // "AND the id.top is <= displayable_itemsrent_active_it.top" so we don't jump FORWARD a section
             // when scrolling BACK, with lots of tiny sections)
             if ((item.offset().top < highlight_section_new_top + 2*$(window).height()/3)
                 && (!active_item || !active_item.offset() || active_item.offset().top >= item.offset().top))
               return item;

           }
           last_item = item;
         }
       });
       if (!highlight_section_completed && document.readyState === "complete") {
         highlight_section_completed = true;
       }
       if (!displayable_items.length) {
         $("#side-menu a.section").removeClass("active");
       } else {
         displayable_items = displayable_items[displayable_items.length-1];
         var id = displayable_items && displayable_items.length ? displayable_items[0].id : "";
       // Set/remove active class
         new_active = $("#side-menu a.section").filter("[section-target='#"+id+"']");
         if (new_active.hasClass("active")) {
           // nothing needed
         } else {
           $("#side-menu a.section").removeClass("active");
           $("#side-menu a.section").filter("[section-target='#"+id+"']").addClass("active");
         }
       }

       highlight_section_last_top = highlight_section_new_top;
    };
    var highlight_new_section = function() {
      highlight_section_completed = false;
      highlight_section_last_top = -1;
      highlight_section();
    }

    $(window).scroll(highlight_section);
    $(highlight_new_section);

    // detect link change - courtesy http://www.bennadel.com/blog/1520-binding-events-to-non-dom-objects-with-jquery.htm

    // Default to the current location.
    var strLocation = window.location.href;
    var strHash = window.location.hash;
    var strPrevLocation = "";
    var strPrevHash = "";

    // This is how often we will be checkint for
    // changes on the location.
    var intIntervalTime = 100;

    // This method removes the pound from the hash.
    var fnCleanHash = function( strHash ){
        return(
            strHash.substring( 1, strHash.length )
            );
    }

    // This will be the method that we use to check
    // changes in the window location.
    var fnCheckLocation = function(){
        // Check to see if the location has changed.
        if (strLocation != window.location.href){

            // Store the new and previous locations.
            strPrevLocation = strLocation;
            strPrevHash = strHash;
            strLocation = window.location.href;
            strHash = window.location.hash;

            // The location has changed. Trigger a
            // change event on the location object,
            // passing in the current and previous
            // location values.
            $( window.location ).trigger(
                "change",
                {
                    currentHref: strLocation,
                    currentHash: fnCleanHash( strHash ),
                    previousHref: strPrevLocation,
                    previousHash: fnCleanHash( strPrevHash )
                }
                );

        }
    }

    // Set an interval to check the location changes.
    setInterval( fnCheckLocation, intIntervalTime );

    // and trigger highlight section on link change
    $(window.location).bind("change", highlight_new_section);
})(jQuery);

</script>

            </aside>
        </div>
    </div>
</main>

<footer class="container">
    <div class="row">
        <div class="col-md-9">
            <p>Apache Brooklyn is distributed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License v2.0</a>.</p>
        </div>
        <div class="col-md-3 text-right">
            <p>
                <a class="btn btn-sm btn-default" href="https://github.com/apache/brooklyn-docs/edit/master/guide/start/policies.md">Edit This Page</a>
                <a href="https://brooklyn.apache.org/community/how-to-contribute-docs.html"
                    data-toggle="tooltip" data-placement="top" title="" data-delay="400" data-original-title="How to Edit Documentation">
                    <span class="octicon octicon-question octicon-footer"></span>
                </a>
            </p>
        </div>
    </div>
</footer>

</body>

<!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
  -->

<script type="text/javascript" src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/brooklyn-docs/style/deps/jquery.cookie.js"></script>
<script type="text/javascript" src="/brooklyn-docs/style/js/zeroclipboard/ZeroClipboard.min.js"></script>
<script type="text/javascript" src="/brooklyn-docs/style/deps/tooltip.js"></script>

<script type="text/javascript" src="/brooklyn-docs/style/deps/glossarizer.js"></script>
<script type="text/javascript">
    $(function(){
        $('body').glossarizer({
            sourceURL: '/guide/glossary.json?'+Math.random(),
            caseSensitive : true,
            lookupTagName : 'p, ul',
            callback: function(){ new tooltip(); }
        });
    });
    </script>

<script type="text/javascript">
    ZeroClipboard.config({ moviePath: '/style/js/zeroclipboard/ZeroClipboard.swf' });
</script>
<script src="/brooklyn-docs/style/js/public.js"></script>
</html>
